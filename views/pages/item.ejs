<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../partials/head %>
</head>

<body>

    <div id="wrapper">
		 <% include ../partials/header %>
		<div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel">
			</div>
			<ol class="breadcrumb">
                            <li>
                                <i class="fa fa-dashboard"></i>  <a href="/project-dashboard">Dashboard</a>
                            </li>
                            <li>
								<%= category %>
                            </li>                            														
                            <li class="active">
                                <i class="fa fa-file"></i> ItemsList
                            </li>
                        </ol>
                    </div>
                </div>
                <!-- /.row -->
                <% if( typeof itemsSubcat !== 'undefined' ){ %>
					<div class="row">
						<div class="col-lg-3 col-md-6">
							<div class="form-group">       
								<select id="subcategoryLimit" name="filter" class="form-control">
									<option value="all">All</option>
									<option disabled>SubCategory</option>
									<% itemsSubcat.forEach(function(subcat){ %>	
										<option value="<%= subcat %>"> â†’ <%= subcat %></option>
									<% }); %>
								</select>
							</div>
						</div>
					</div>
				<% } %>                  
                                
 <!-- Items List -->               
 <div class="row">
  <div class="col-lg-12">
	<% if( typeof filter !== 'undefined' ){ %>
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h4><%= filter %></h4>
			</div>
		</div>
	<% } %>
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">
          <i class="fa fa-edit"></i> List <%= category %> Items
        </h3>
      </div>
      <div class="panel-body">
        <table class="table table-striped tablesorter" style="margin-top:-12px;">
          <thead>
            <tr>	
              <th style="width:20%"><b>Item Name</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>Status</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>Category</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>SubCategory</b> <i class="fa fa-sort"></i></th>
              <th style="width:15%"><b>Create Date</b> <i class="fa fa-sort"></i></th>
              <th style="width:15%"><b>Update Date</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>Owner</b> <i class="fa fa-sort"></i></th>
            </tr>
          </thead>

          <tbody>
			  
            <% items.forEach(function(item){ %>
              <tr>
                <td style="width:20%"><a href="/item-edit-<%= item.id %>"><%= item.ip %> <%= item.name %></a></td>
                <td style="width:10%"><%= item.status %></td>
                <td style="width:10%"><%= item.category %></td>
                <td style="width:10%"><%= item.subcategory %></td>
                <td style="width:15%"><%= item.date %></td>
                <td style="width:15%"><% if( item.updateDate !== null ){ %><%= item.updateDate %> <% } %></td>
                <td style="width:10%"><%= item.owner %></td>
                <td style="width:15%">
					<div class="row">
						<div class="form-group col-xs-4">
							<form action="/item-edit-<%= item._id %>" method="GET" role="form">
								<button type="submit" class="btn btn-info">Edit</button>
							</form>
						</div>
						<div class="form-group col-xs-4">
							<form action="/item/<%= item._id %>" method="DELETE" role="form">
								<button type="delete" class="btn btn-danger">Delete</button>
								<input type="hidden" value="DELETE" name="_method" />
							</form>
						</div>
					</div>
				</td>
              </tr>
            <% }); %>
            
          </tbody>
          
        </table>
      </div>
    </div>
  </div>
</div>

 <!-- Update Items List -->
 <% if( typeof updateItems !== 'undefined' ){ %>
 <% if( updateItems.length !== 0 ){ %>	 
 <div class="row">
  <div class="col-lg-12">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">
          <i class="fa fa-edit"></i> List Update Items
        </h3>
      </div>
      <div class="panel-body">
        <table class="table table-striped tablesorter" style="margin-top:-12px;">
          <thead>
            <tr>
              <th style="width:20%"><b>Item Name</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>Status</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>Category</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>SubCategory</b> <i class="fa fa-sort"></i></th>
              <th style="width:15%"><b>Create Date</b> <i class="fa fa-sort"></i></th>
              <th style="width:15%"><b>Update Date</b> <i class="fa fa-sort"></i></th>
              <th style="width:10%"><b>Owner</b> <i class="fa fa-sort"></i></th>
            </tr>
          </thead>

          <tbody>
			  
            <% updateItems.forEach(function(item){ %>
              <tr>
                <td style="width:20%"><a href="/item-edit-<%= item.id %>"><%= item.ip %> <%= item.name %></a></td>
                <td style="width:10%"><%= item.status %></td>
                <td style="width:10%"><%= item.category %></td>
                <td style="width:10%"><%= item.subcategory %></td>
                <td style="width:15%"><%= item.date %></td>
                <td style="width:15%"><%= item.updateDate %></td>
                <td style="width:10%"><%= item.owner %></td>
                <td style="width:15%">
					<div class="row">
						<div class="form-group col-xs-4">
							<form action="/item-edit-<%= item._id %>" method="GET" role="form">
								<button type="submit" class="btn btn-info">Edit</button>
							</form>
						</div>
						<div class="form-group col-xs-4">
							<form action="/item/<%= item._id %>" method="DELETE" role="form">
								<button type="delete" class="btn btn-danger">Delete</button>
								<input type="hidden" value="DELETE" name="_method" />
							</form>
						</div>
					</div>
				</td>
              </tr>
            <% }); %>
            
          </tbody>
          
        </table>
      </div>
    </div>
  </div>
</div>
<% } %>	
<% } %>			

            </div>
            <!-- /.container-fluid -->
		</div>
	</div>
   
	<% include ../partials/footer %>
    
<script type="text/javascript">
$("#subcategoryLimit").change(
	function(){
		var a = $(this).find("option:selected").val();
		$("table tr td:nth-child(4)").each(
			function(){				
				if(a == "all"){
					$(this).parent().show();
				}else if($(this).html() != a){
					$(this).parent().hide();
				}else{
					$(this).parent().show();
				}
			});
	});
</script>    
    
</body>

</html>
